{"version":3,"file":"commonHelpers.js","sources":["../src/modal.js"],"sourcesContent":["import axios from \"axios\";\nconst buttonClick = document.querySelector(\".but\");\nconst modalWindow = document.querySelector(\".mdl_box\");\nconst contentForm = document.querySelector(\".mdl_forma\")\nconst butClose = document.querySelector(\".close\");\nconst inputUserName = document.querySelector(\".username\");\nconst butSubmit = document.querySelector(\".but_submit\");\nconst inputUserPhone = document.querySelector(\".phone\");\nconst formUser = document.querySelector(\".forma_for_connect\");\nconst labelText = document.getElementById(\"label-inpt\");\nconst token = \"6077606622:AAG6g12itzLvnsQfazmk9-oBfkHb1kflQYk\";\nlet idCzat;\n\n//get token bot//\naxios.get(`https://api.telegram.org/bot${token}/getUpdates`)\n    .then(response => { \n        idCzat = response.data.result[response.data.result.length - 1].message.chat.id;\n    })\n    .catch(error => console.log(error.massage))\n\n//check input name//\n\nasync function checkName() {\n\n    if(inputUserName.value.trim() === \"\") {\n        inputUserName.classList.add(\"red\");\n    }\n    else {\n        inputUserName.classList.remove(\"red\");\n    }\n}\n\n// //check input phone//\n\nasync function checkPhone() {\n\n    if(inputUserPhone.value.trim() === \"\" || !(inputUserPhone.value.trim().includes(\"+\")) || inputUserPhone.value.trim().split('').length < 12) {\n        inputUserPhone.classList.add(\"red\");\n    }\n    else {\n        inputUserPhone.classList.remove(\"red\");\n    }\n}\n\n//succes feedback//\n\nasync function succes() {\n    contentForm.innerHTML = \"\";\n        contentForm.style.height = \"312px\";\n\n        let str = ``;\n        str += `<svg class=\"close\" fill=\"black\" width=\"14\" height=\"14\">\n                    <use href=\"./sprite.svg#icon-close\"></use>\n                </svg>\n                <h2 class=\"title_feedback\">See you soon!</h2>\n                <p class=\"text_feedback\">Ваші дані були успішно відправлені. \n                Будь ласка, очікуйте: я зв'яжуся з Вами якнайшвидше для обговорення деталей.</p>`;\n\n        contentForm.innerHTML = str;\n        const titleFdbk = document.querySelector(\".title_feedback\");\n        titleFdbk.style.fontSize = \"80px\";\n        titleFdbk.style.margin = \"0\";\n        titleFdbk.style.textAlign = \"center\";\n}\n\n//succes error//\n\nasync function error() {\n    contentForm.style.height = \"312px\";\n\n        let str = ``;\n        str += `<svg class=\"close\" fill=\"black\" width=\"14\" height=\"14\">\n                    <use href=\"./sprite.svg#icon-close\"></use>\n                </svg>\n                <h2 class=\"title_feedback\">Error</h2>\n                <p class=\"text_feedback\">На жаль, на сайті сталася помилка і Ваші дані не були відправлені. Спробуйте, будь ласка, пізніше.</p>`;\n\n        contentForm.innerHTML = str;\n        const titleFdbk = document.querySelector(\".title_feedback\");\n        titleFdbk.style.fontSize = \"80px\";\n        titleFdbk.style.margin = \"0\";\n        titleFdbk.style.textAlign = \"center\";\n} \n\nbuttonClick.addEventListener(\"click\", (e) => {\n    modalWindow.style.display = \"block\";\n});\n\nbutClose.addEventListener(\"click\", (e) => {\n    modalWindow.style.display = \"none\";\n});\n\ninputUserName.addEventListener(\"input\", (e) => {\n    checkName();\n});\n\ninputUserPhone.addEventListener(\"input\", (e) => {\n    checkPhone();\n});\n\nbutSubmit.addEventListener(\"click\", (e) => {\n    checkName();\n    checkPhone();\n})\n\nformUser.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    checkName();\n    checkPhone();\n\n    async function sendMessage(message) {\n        await axios.post(`https://api.telegram.org/bot${token}/sendMessage`, {\n                chat_id: idCzat,\n                text: message\n            })\n        .then(response => { \n            succes();\n            response.status;\n        })\n        .catch(error => {\n            error();\n            console.error(\"Error in sending sms:\", error)\n        });\n    }\n        \n        const formData = new FormData(document.querySelector('.forma_for_connect'));\n        const userName = formData.get(\"username\");\n        const userPhone = formData.get(\"phone\");\n        const education = formData.get(\"education\");\n        const comment = formData.get(\"comment\");\n        \n        const message = `\n            Нова заявка:\n    1) Им'я: ${userName};\n    2) Телефон: ${userPhone};\n    3) Формат навчання: ${education};\n    4) Коментар: ${comment.split(\"\").length > 0 ? comment : \"Without comments\"};\n        `;\n        sendMessage(message);\n});\n"],"names":["buttonClick","modalWindow","contentForm","butClose","inputUserName","butSubmit","inputUserPhone","formUser","token","idCzat","axios","response","error","checkName","checkPhone","succes","str","titleFdbk","e","sendMessage","message","formData","userName","userPhone","education","comment"],"mappings":"svBACA,MAAMA,EAAc,SAAS,cAAc,MAAM,EAC3CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAW,SAAS,cAAc,QAAQ,EAC1CC,EAAgB,SAAS,cAAc,WAAW,EAClDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAiB,SAAS,cAAc,QAAQ,EAChDC,EAAW,SAAS,cAAc,oBAAoB,EAC1C,SAAS,eAAe,YAAY,EACtD,MAAMC,EAAQ,iDACd,IAAIC,EAGJC,EAAM,IAAI,+BAA+BF,CAAK,aAAa,EACtD,KAAKG,GAAY,CACdF,EAASE,EAAS,KAAK,OAAOA,EAAS,KAAK,OAAO,OAAS,CAAC,EAAE,QAAQ,KAAK,EACpF,CAAK,EACA,MAAMC,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,EAI9C,eAAeC,GAAY,CAEpBT,EAAc,MAAM,KAAI,IAAO,GAC9BA,EAAc,UAAU,IAAI,KAAK,EAGjCA,EAAc,UAAU,OAAO,KAAK,CAE5C,CAIA,eAAeU,GAAa,CAErBR,EAAe,MAAM,KAAM,IAAK,IAAM,CAAEA,EAAe,MAAM,OAAO,SAAS,GAAG,GAAMA,EAAe,MAAM,KAAI,EAAG,MAAM,EAAE,EAAE,OAAS,GACpIA,EAAe,UAAU,IAAI,KAAK,EAGlCA,EAAe,UAAU,OAAO,KAAK,CAE7C,CAIA,eAAeS,GAAS,CACpBb,EAAY,UAAY,GACpBA,EAAY,MAAM,OAAS,QAE3B,IAAIc,EAAM,GACVA,GAAO;AAAA;AAAA;AAAA;AAAA;AAAA,kGAOPd,EAAY,UAAYc,EACxB,MAAMC,EAAY,SAAS,cAAc,iBAAiB,EAC1DA,EAAU,MAAM,SAAW,OAC3BA,EAAU,MAAM,OAAS,IACzBA,EAAU,MAAM,UAAY,QACpC,CAqBAjB,EAAY,iBAAiB,QAAUkB,GAAM,CACzCjB,EAAY,MAAM,QAAU,OAChC,CAAC,EAEDE,EAAS,iBAAiB,QAAUe,GAAM,CACtCjB,EAAY,MAAM,QAAU,MAChC,CAAC,EAEDG,EAAc,iBAAiB,QAAUc,GAAM,CAC3CL,GACJ,CAAC,EAEDP,EAAe,iBAAiB,QAAUY,GAAM,CAC5CJ,GACJ,CAAC,EAEDT,EAAU,iBAAiB,QAAUa,GAAM,CACvCL,IACAC,GACJ,CAAC,EAEDP,EAAS,iBAAiB,SAAU,MAAOW,GAAM,CAC7CA,EAAE,eAAc,EAEhBL,IACAC,IAEA,eAAeK,EAAYC,EAAS,CAChC,MAAMV,EAAM,KAAK,+BAA+BF,CAAK,eAAgB,CAC7D,QAASC,EACT,KAAMW,CACtB,CAAa,EACJ,KAAKT,GAAY,CACdI,IACAJ,EAAS,MACrB,CAAS,EACA,MAAMC,GAAS,CACZA,IACA,QAAQ,MAAM,wBAAyBA,CAAK,CACxD,CAAS,CACJ,CAEG,MAAMS,EAAW,IAAI,SAAS,SAAS,cAAc,oBAAoB,CAAC,EACpEC,EAAWD,EAAS,IAAI,UAAU,EAClCE,EAAYF,EAAS,IAAI,OAAO,EAChCG,EAAYH,EAAS,IAAI,WAAW,EACpCI,EAAUJ,EAAS,IAAI,SAAS,EAEhCD,EAAU;AAAA;AAAA,eAETE,CAAQ;AAAA,kBACLC,CAAS;AAAA,0BACDC,CAAS;AAAA,mBAChBC,EAAQ,MAAM,EAAE,EAAE,OAAS,EAAIA,EAAU,kBAAkB;AAAA,UAEtEN,EAAYC,CAAO,CAC3B,CAAC"}